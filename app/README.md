# Decentralized E-commerce DApp Frontend

这是一个基于以太坊的去中心化电商平台前端应用，支持拍卖、托管和仲裁功能。

## 新增功能

### 1. 仲裁人管理页面 (`arbiter.html`)
- **成为仲裁人**: 用户可以支付5 ETH保证金成为产品的仲裁人
- **取消仲裁人**: 仲裁人可以随时取消角色并收回保证金
- **销毁保证金**: 合约创建者可以销毁恶意仲裁人的保证金
- **反馈评分**: 买家可以给卖家评分（1-10分）
- **托管信息查询**: 查看产品的托管详细信息

### 2. 用户仪表板 (`dashboard.html`)
- **账户信息**: 显示当前账户地址和余额
- **我的产品**: 显示用户作为卖家发布的产品
- **我的投标**: 显示用户作为买家的投标记录
- **我的仲裁**: 显示用户参与的仲裁案件
- **待处理操作**: 显示需要用户处理的操作

### 3. 产品状态管理 (`product-status.html`)
- **产品状态查询**: 输入产品ID查看详细状态
- **状态显示**: 
  - 未开始 (Not Started)
  - 活跃 (Active)
  - 揭示阶段 (Reveal Phase)
  - 结束阶段 (Finalize Phase)
  - 已售出 (Sold)
  - 未售出 (Unsold)
- **操作建议**: 根据产品状态和用户角色显示可执行的操作

### 4. 网络状态监控 (`network-status.html`)
- **连接状态检查**: Web3和IPFS连接状态实时监控
- **账户信息显示**: 当前账户地址和余额
- **合约状态**: 智能合约地址和产品总数
- **实时状态更新**: 自动刷新连接状态

### 5. 错误处理和用户体验
- **网络状态检查**: 自动检测Web3和IPFS连接
- **交易监控**: 实时监控交易状态和确认
- **错误恢复**: 智能错误处理和用户提示
- **加载状态**: 操作过程中的加载指示器
- **表单验证**: 完整的输入验证和错误提示

## 页面导航

### 主页面 (`index.html`)
- 产品列表展示
- 分类筛选
- 导航到各个功能页面

### 产品详情页 (`product.html`)
- 产品详细信息
- 投标功能
- 揭示投标
- 结束拍卖
- 托管操作

### 发布产品页 (`list-item.html`)
- 产品信息填写
- 图片上传到IPFS
- 拍卖参数设置

## 智能合约功能

### EcommerceStore.sol
- 产品管理
- 密封投标拍卖
- 拍卖结束和托管创建

### Escrow.sol
- 资金托管
- 仲裁人管理
- 反馈评分系统

## 使用方法

1. **安装依赖**
   ```bash
   cd app
   npm install
   ```

2. **启动开发服务器**
   ```bash
   npm run dev
   ```

3. **访问应用**
   - 打开浏览器访问 `http://localhost:8080`
   - 确保MetaMask已连接并切换到正确的网络

## 功能流程

### 拍卖流程
1. 卖家发布产品 → 设置起拍价和拍卖时间
2. 买家参与密封投标 → 提交投标金额和秘密文本
3. 拍卖结束后进入揭示阶段 → 买家揭示真实投标
4. 第三方结束拍卖 → 创建托管合约
5. 买卖双方和仲裁人决定资金流向

### 仲裁流程
1. 第三方支付保证金成为仲裁人
2. 仲裁人参与资金释放/退款决策
3. 交易完成后买家给卖家评分
4. 仲裁人获得服务费

## 技术栈

- **前端**: HTML5, CSS3, JavaScript, jQuery, Bootstrap
- **区块链**: Web3.js, Truffle
- **存储**: IPFS (图片和描述文件)
- **开发工具**: Webpack

## 注意事项

- 确保以太坊网络正常运行
- 确保IPFS节点可用
- 确保MetaMask正确配置
- 测试网络建议使用足够测试币的账户 